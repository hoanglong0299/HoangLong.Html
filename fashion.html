<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fashion</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" crossorigin="anonymous"/>
    <link rel="stylesheet" href="css/fashion.css">
</head>

<body>

    <div class="container">
        <div class="header">
            <h1>Clothing</h1>
            <div class="sorting">
                <label for="sort">Sort by:</label>
                <select id="sort">
                    <option value="default">Default sorting</option>
                    <option value="price-low">Price: Low to High</option>
                    <option value="price-high">Price: High to Low</option>
                    <option value="name">Name: A to Z</option>
                    <option value="rating">Rating</option>
                </select>
            </div>
        </div>

        <div class="results-info">Showing <span id="showing-range">1-10</span> of <span id="total-results">12</span> results</div>

        <div id="products-container" class="products-grid">
            <div class="loading">Loading products...</div>
        </div>

        <div class="pagination" id="pagination">
    
        </div>
    </div>

    <script>
        const mockProducts = [
            {
                id: 1,
                name: "Happy Ninja",
                price: 18.00,
                image: "ðŸ‘•",
                rating: 5,
                description: "Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae."
            },
            {
                id: 2,
                name: "Happy Ninja",
                price: 35.00,
                image: "ðŸ‘”",
                rating: 3,
                description: "Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam."
            },
            {
                id: 3,
                name: "Ninja Silhouette",
                price: 20.00,
                image: "ðŸ‘•",
                rating: 5,
                description: "Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor."
            },
            {
                id: 4,
                name: "Ninja Silhouette",
                price: 35.00,
                image: "ðŸ§¥",
                rating: 4,
                description: "Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor."
            },
            {
                id: 5,
                name: "Patient Ninja",
                price: 35.00,
                image: "ðŸ‘”",
                rating: 5,
                description: "Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor."
            },
            {
                id: 6,
                name: "Premium Quality",
                price: 20.00,
                image: "ðŸ‘•",
                rating: 4.5,
                description: "Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor."
            },
            {
                id: 7,
                name: "Ship Your Idea",
                price: 20.00,
                image: "ðŸ‘•",
                rating: 4.5,
                description: "Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor."
            },
            {
                id: 8,
                name: "Ship Your Idea",
                priceMin: 30.00,
                priceMax: 35.00,
                image: "ðŸ§¥",
                rating: 4,
                description: "Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor.",
                hasOptions: true
            },
            {
                id: 9,
                name: "Woo Logo",
                price: 20.00,
                originalPrice: 18.00,
                image: "ðŸ‘•",
                rating: 4,
                description: "Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor.",
                onSale: true
            },
            {
                id: 10,
                name: "Woo Logo",
                price: 35.00,
                image: "ðŸ§¥",
                rating: 4,
                description: "Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor."
            },
            {
                id: 11,
                name: "Extra Product 1",
                price: 25.00,
                image: "ðŸ‘•",
                rating: 3.5,
                description: "Additional product for pagination demo"
            },
            {
                id: 12,
                name: "Extra Product 2",
                price: 40.00,
                image: "ðŸ§¥",
                rating: 5,
                description: "Another product for pagination demo"
            }
        ];

        // State management
        let currentPage = 1;
        const productsPerPage = 10;
        let allProducts = [];
        let filteredProducts = [];

        // API simulation function
        async function fetchProducts() {
            // Simulate API call with delay
            return new Promise((resolve) => {
                setTimeout(() => {
                    resolve({
                        success: true,
                        data: mockProducts,
                        total: mockProducts.length
                    });
                }, 500);
            });
        }

        // Real API implementation example (commented out)
        
        async function fetchProductsFromAPI() {
            try {
                const response = await fetch('https://dummyjson.com/products?limit=20', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer YOUR_API_TOKEN'
                    }
                });
                
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Error fetching products:', error);
                return { success: false, error: error.message };
            }
        }
 
        function renderStars(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= rating) {
                    stars += '<span class="star">â˜…</span>';
                } else if (i - 0.5 <= rating) {
                    stars += '<span class="star">â˜†</span>';
                } else {
                    stars += '<span class="star empty">â˜†</span>';
                }
            }
            return stars;
        }

        // Render products
        function renderProducts(products) {
            const container = document.getElementById('products-container');
            
            if (products.length === 0) {
                container.innerHTML = '<div class="error">No products found</div>';
                return;
            }

            const startIndex = (currentPage - 1) * productsPerPage;
            const endIndex = startIndex + productsPerPage;
            const pageProducts = products.slice(startIndex, endIndex);

            container.innerHTML = pageProducts.map(product => `
                <div class="product-card">
                    <div class="product-image">${product.image}</div>
                    <div class="product-info">
                        <h3 class="product-name">${product.name}</h3>
                        <div class="rating">${renderStars(product.rating)}</div>
                        <div class="price">
                            ${product.onSale ? `<del>Â£${product.originalPrice.toFixed(2)}</del> ` : ''}
                            ${product.priceMin ? 
                                `<span class="price-range">Â£${product.priceMin.toFixed(2)} - Â£${product.priceMax.toFixed(2)}</span>` : 
                                `Â£${product.price.toFixed(2)}`
                            }
                        </div>
                        <p class="description">${product.description}</p>
                        <button class="add-to-cart ${product.hasOptions ? 'select-options' : ''}" 
                                onclick="addToCart(${product.id})">
                            ${product.hasOptions ? 'Select options' : 'Add to cart'}
                        </button>
                    </div>
                </div>
            `).join('');

            // Update results info
            document.getElementById('showing-range').textContent = 
                `${startIndex + 1}-${Math.min(endIndex, products.length)}`;
            document.getElementById('total-results').textContent = products.length;
        }

        // Render pagination
        function renderPagination() {
            const totalPages = Math.ceil(filteredProducts.length / productsPerPage);
            const pagination = document.getElementById('pagination');
            
            let paginationHTML = '';
            
            // Previous button
            if (currentPage > 1) {
                paginationHTML += `<button onclick="goToPage(${currentPage - 1})">Previous</button>`;
            }
            
            // Page numbers
            for (let i = 1; i <= totalPages; i++) {
                if (i === currentPage) {
                    paginationHTML += `<button class="active" onclick="goToPage(${i})">${i}</button>`;
                } else {
                    paginationHTML += `<button onclick="goToPage(${i})">${i}</button>`;
                }
            }
            
            // Next button
            if (currentPage < totalPages) {
                paginationHTML += `<button onclick="goToPage(${currentPage + 1})">Next â†’</button>`;
            }
            
            pagination.innerHTML = paginationHTML;
        }
       

                fetch('https://dummyjson.com/products?limit=20', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer YOUR_API_TOKEN'
                    },
                    body: JSON.stringify({
                        productId: productId,
                        quantity: 1
                    })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        updateCartCount(data.cartCount);
                    }
                });
                
            
        

        // Initialize
        async function init() {
            try {
                const response = await fetchProducts();
                if (response.success) {
                    allProducts = response.data;
                    filteredProducts = [...allProducts];
                    renderProducts(filteredProducts);
                    renderPagination();
                } else {
                    document.getElementById('products-container').innerHTML = 
                        '<div class="error">Failed to load products. Please try again later.</div>';
                }
            } catch (error) {
                console.error('Error initializing:', error);
                document.getElementById('products-container').innerHTML = 
                    '<div class="error">An error occurred. Please refresh the page.</div>';
            }
        }

        // Event listeners
        document.getElementById('sort').addEventListener('change', (e) => {
            sortProducts(e.target.value);
        });

        // Start the application
        init();
    </script>

</body>
</html>